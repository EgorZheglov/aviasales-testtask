{"version":3,"sources":["images/Logo.svg","components/Header.js","components/Sidebar.js","components/Ticket.js","services/api.js","components/Main.js","components/App.js","index.js"],"names":["Header","className","src","logo","alt","Sidebar","React","useState","isAllStopsChecked","setAllStopsChecked","isZeroStopsChecked","setZeroStopsChecked","isOneStopChecked","setOneStopChecked","isTwoStopsChecked","setTwoStopsChecked","isThreeStopsChecked","setThreeStopsChecked","dispatch","useDispatch","stopsArray","useSelector","state","changeSortArray","evt","target","checked","type","payload","value","filter","el","id","onChange","htmlFor","Ticket","props","data","dateOrigin","Date","segments","date","originArrivalHours","getHours","Math","floor","duration","originArrivalMinutes","getMinutes","dateDestination","destinationArrivalHours","destinationArrivalMinutes","price","carrier","origin","destination","stops","length","reduce","prevVal","api","url","this","_url","res","ok","json","Promise","reject","status","fetch","then","_checkResponse","searhcID","Main","ticketsArray","setTicketsArray","filtredArray","setFiltredArray","sortBySpeed","setSortBySpeed","sortByPrice","setSortByPrice","isLoading","setIsloading","ticketsCount","setTicketsCount","speedSort","a","b","priceSort","useEffect","getSearchId","getInitialTickets","searchId","tickets","sort","some","stop","onClick","slice","map","ticket","i","App","defaultState","store","createStore","action","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b6f6f39a.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Logo.309a1b5d.svg\";","import logo from '../images/Logo.svg'\r\nimport React from 'react';\r\n\r\nfunction Header () {\r\n\r\n  return (\r\n    <div className='header'>\r\n      <img className='header__logo' src={logo} alt='лого'/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nfunction Sidebar(){\r\n\r\n    const [isAllStopsChecked, setAllStopsChecked] = React.useState(true);\r\n\r\n    const [isZeroStopsChecked, setZeroStopsChecked] = React.useState(false);\r\n    const [isOneStopChecked, setOneStopChecked] = React.useState(false);\r\n    const [isTwoStopsChecked, setTwoStopsChecked] = React.useState(false);\r\n    const [isThreeStopsChecked, setThreeStopsChecked] = React.useState(false);\r\n    \r\n    //const [sortArray, setSortArray] = React.useState([]);\r\n    //Массив для одобренных вариантов количества пересадок\r\n\r\n    const dispatch = useDispatch()\r\n    const stopsArray = useSelector(state => state.stopsArray)\r\n\r\n    function changeSortArray(evt){\r\n        //Функция, обновляющая массив количества пересадок в зависимости от состояния input'a\r\n        if(evt.target.checked){\r\n            dispatch({type:'CHANGE_ARRAY', payload:[...stopsArray, +evt.target.value]})\r\n        }else{\r\n            dispatch({type:'CHANGE_ARRAY', payload:stopsArray.filter(el => el !== +evt.target.value)})\r\n        }\r\n        return;\r\n    }\r\n\r\n\r\n\r\n    function toggleAllStopsChecked(evt){\r\n        setAllStopsChecked(evt.target.checked);\r\n        dispatch({type:'TOGGLE_STOPS', payload:evt.target.checked})\r\n    }\r\n\r\n    function toggleZeroStopsChecked(evt){\r\n        setZeroStopsChecked(!isZeroStopsChecked);\r\n        changeSortArray(evt)\r\n    }\r\n\r\n    function toggleOneStopChecked(evt){\r\n        setOneStopChecked(!isOneStopChecked);\r\n        changeSortArray(evt)\r\n    }\r\n\r\n    function toggleTwoStopsChecked(evt){\r\n        setTwoStopsChecked(!isTwoStopsChecked);\r\n        changeSortArray(evt)\r\n    }\r\n\r\n    function toggleThreeStopsChecked(evt){\r\n        setThreeStopsChecked(!isThreeStopsChecked);\r\n        changeSortArray(evt)\r\n    }\r\n\r\n    return (\r\n        <div className='sidebar'>\r\n            <h1 className='sidebar__header'>Количество пересадок</h1>\r\n            <div className='sidebar__item'>\r\n                <input className='sidebar__checkbox'  checked={isAllStopsChecked} type='checkbox' id='all' onChange={toggleAllStopsChecked}/>\r\n                <label className={`sidebar__label ${isAllStopsChecked?'sidebar__label_checked':''}`} htmlFor='all' ></label>\r\n                Все\r\n            </div>\r\n            <div className='sidebar__item'>\r\n                <input className='sidebar__checkbox' value={0} checked={isZeroStopsChecked} type='checkbox'  id='zerostops' onChange={toggleZeroStopsChecked}/>\r\n                <label className={`sidebar__label ${isZeroStopsChecked?'sidebar__label_checked':''}`} htmlFor='zerostops' ></label>\r\n                Без пересадок\r\n            </div>\r\n            <div className='sidebar__item'>\r\n                <input className='sidebar__checkbox' value={1} checked={isOneStopChecked} type='checkbox' id='1stop' onChange={toggleOneStopChecked}/>\r\n                <label className={`sidebar__label ${isOneStopChecked?'sidebar__label_checked':''}`} htmlFor='1stop'></label>\r\n                1 пересадка\r\n            </div>\r\n            <div className='sidebar__item'>\r\n                <input className='sidebar__checkbox' value={2} checked={isTwoStopsChecked} type='checkbox' id='2stops' onChange={toggleTwoStopsChecked}/>\r\n                <label className={`sidebar__label ${isTwoStopsChecked?'sidebar__label_checked':''}`} htmlFor='2stops'></label>\r\n                2 пересадки\r\n            </div>\r\n            <div className='sidebar__item'>\r\n                <input className='sidebar__checkbox' value={3} checked={isThreeStopsChecked} type='checkbox' id='3stops' onChange={toggleThreeStopsChecked}/>\r\n                <label className={`sidebar__label ${isThreeStopsChecked?'sidebar__label_checked':''}`} htmlFor='3stops'></label>\r\n                3 пересадки\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Sidebar","\r\nfunction Ticket(props){\r\n\r\n    const data = props.data;\r\n     \r\n    const dateOrigin = new Date(data.segments[0].date)\r\n\r\n    const originArrivalHours = (dateOrigin.getHours() + Math.floor(data.segments[0].duration/60)) % 24;\r\n    const originArrivalMinutes = (dateOrigin.getMinutes() + (data.segments[0].duration % 60)) % 60;\r\n    \r\n\r\n    const dateDestination = new Date(data.segments[0].date);\r\n\r\n    const destinationArrivalHours = (dateDestination.getHours() + Math.floor(data.segments[1].duration/60)) % 24;\r\n    const destinationArrivalMinutes = (dateDestination.getMinutes() + (data.segments[1].duration % 60)) % 60;\r\n\r\n\r\n    return (\r\n        <div className='main__ticket'>\r\n            <div className='main__header'>\r\n                <h2 className='main__price'>{data.price}р</h2>\r\n                <img className='main__logo' src={`https://pics.avs.io/99/36/${data.carrier}.png`} alt='Лого'/>\r\n            </div>\r\n            <div className='main__info'>\r\n                <div className='main__info-item'>\r\n                    <h3 className='main__info-header'>{data.segments[0].origin} – {data.segments[0].destination}</h3>\r\n                    <div className='main__info-value'>{dateOrigin.getHours() < 10 ? `0${dateOrigin.getHours()}`:`${dateOrigin.getHours()}`}:{dateOrigin.getMinutes() < 10 ? `0${dateOrigin.getMinutes()}`:`${dateOrigin.getMinutes()}`} – {originArrivalHours < 10 ? `0${originArrivalHours}`:`${originArrivalHours}`}:{originArrivalMinutes < 10 ? `0${originArrivalMinutes}`:`${originArrivalMinutes}`}</div>\r\n                </div>\r\n                <div className='main__info-item'>\r\n                    <h3 className='main__info-header'>В пути</h3>\r\n                    <div className='main__info-value'>{Math.floor(data.segments[0].duration/60)}ч {data.segments[0].duration % 60}м</div>\r\n                    {/*В документации к api не указано, в каком формате приходит время*/}\r\n                </div>\r\n                <div className='main__info-item'>\r\n                    {data.segments[0].stops.length !== 0 ? (<>\r\n                    <h3 className='main__info-header'>{data.segments[0].stops.length === 1 ? '1 пересадка' : `${data.segments[0].stops.length} пересадки`}</h3>\r\n                    <div className='main__info-value'>{data.segments[0].stops.reduce((prevVal, el) => prevVal + ', ' + el)}</div> </>):(<h3 className='main__info-header'>0 пересадок</h3>)}\r\n                </div>\r\n                <div className='main__info-item'>\r\n                    <h3 className='main__info-header'>{data.segments[1].origin} – {data.segments[1].destination}</h3>\r\n                    <div className='main__info-value'>{dateDestination.getHours() < 10 ? `0${dateDestination.getHours()}`:`${dateDestination.getHours()}`}:{dateDestination.getMinutes() < 10 ? `0${dateDestination.getMinutes()}`:`${dateDestination.getMinutes()}`} – {destinationArrivalHours < 10 ? `0${destinationArrivalHours}`:`${destinationArrivalHours}`}:{destinationArrivalMinutes < 10 ? `0${destinationArrivalMinutes}`:`${destinationArrivalMinutes}`}</div>\r\n                </div>\r\n                <div className='main__info-item'>\r\n                    <h3 className='main__info-header'>В пути</h3>\r\n                    <div className='main__info-value'>{Math.floor(data.segments[1].duration/60)}ч {data.segments[1].duration % 60}м</div>\r\n                </div>\r\n                <div className='main__info-item'>\r\n                    {data.segments[1].stops.length !== 0 ? (<>\r\n                    <h3 className='main__info-header'>{data.segments[1].stops.length === 1 ? '1 пересадка' : `${data.segments[1].stops.length} пересадки`}</h3>\r\n                    <div className='main__info-value'>{data.segments[1].stops.reduce((prevVal, el) => prevVal + ', ' + el)}</div> \r\n                    </>):(<h3 className='main__info-header'>0 пересадок</h3>)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Ticket","class Api{\r\n    constructor(url){\r\n        this._url = url;\r\n    }\r\n\r\n\r\n    _checkResponse(res) {\r\n        //проверка ответа на запрос\r\n          if (res.ok) {\r\n            return res.json()\r\n          }\r\n          return Promise.reject(res.status)\r\n    }\r\n\r\n    getSearchId(){\r\n        return fetch(`${this._url}/search`)\r\n        .then(this._checkResponse)\r\n    }\r\n    \r\n    getInitialTickets(searhcID){\r\n        //получаем билеты\r\n        return fetch(`${this._url}/tickets?searchId=${searhcID}`)\r\n        .then(this._checkResponse)\r\n    }\r\n}\r\n\r\nconst api = new Api('https://front-test.beta.aviasales.ru');\r\n\r\nexport default api;","import Ticket from \"./Ticket\";\r\nimport React from 'react';\r\nimport api from \"../services/api\";\r\nimport {useSelector} from 'react-redux';\r\n\r\nfunction Main(){\r\n\r\n    const [ticketsArray, setTicketsArray] = React.useState([]);\r\n    const [filtredArray, setFiltredArray] = React.useState([]);\r\n\r\n    const [sortBySpeed, setSortBySpeed] = React.useState(true);\r\n    const [sortByPrice, setSortByPrice] = React.useState(false);\r\n    const [isLoading, setIsloading] = React.useState(true);\r\n    const [ticketsCount, setTicketsCount] = React.useState(5);\r\n\r\n    const isAllStopsChecked = useSelector(state => state.isAllStopsChecked);\r\n    const stopsArray = useSelector(state => state.stopsArray);\r\n\r\n    React.useEffect(() =>{\r\n        api.getSearchId()\r\n        .then(res =>{\r\n          api.getInitialTickets(res.searchId)\r\n          .then(res => {\r\n             setTicketsArray(res.tickets.sort(speedSort))\r\n\r\n             setIsloading(false);\r\n          })\r\n        })\r\n      }, [])\r\n\r\n      React.useEffect(() =>{\r\n        if(isAllStopsChecked){\r\n            return setFiltredArray(ticketsArray);\r\n        }\r\n\r\n        \r\n        setFiltredArray(ticketsArray.filter(el => {\r\n\r\n            const stops = el.segments[0].stops.length + el.segments[1].stops.length;\r\n\r\n            return stopsArray.some((stop) => stops === stop)\r\n        }));\r\n\r\n\r\n        return;\r\n\r\n      }, [isAllStopsChecked, stopsArray, ticketsArray])\r\n\r\n\r\n    function speedSort(a, b){\r\n        let timeA = a.segments[0].duration + a.segments[1].duration\r\n        let timeB = b.segments[0].duration + b.segments[1].duration\r\n\r\n        return timeA - timeB;\r\n    }\r\n\r\n    function priceSort(a, b){\r\n        return a.price - b.price\r\n    }\r\n\r\n\r\n    function setSortSpeed(){\r\n        setSortBySpeed(true);\r\n        setSortByPrice(false);\r\n\r\n        setTicketsArray(filtredArray.sort(speedSort));\r\n    }\r\n\r\n    function setSortPrice(){\r\n        setSortBySpeed(false);\r\n        setSortByPrice(true);\r\n\r\n        setTicketsArray(filtredArray.sort(priceSort));\r\n    }\r\n\r\n\r\n    function showTickets(){\r\n        setTicketsCount(ticketsCount + 5)\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className='main'>\r\n          <div className='main__tabs'>\r\n              <button className={`main__tab ${sortBySpeed ? `main__tab_is-active`:``}`} onClick={setSortSpeed}>Самый быстрый</button>\r\n              <button className={`main__tab ${sortByPrice ? `main__tab_is-active`:``}`} onClick={setSortPrice}>Самый дешевый</button>\r\n          </div>\r\n          {!isLoading && filtredArray.slice(0, ticketsCount).map((ticket, i) => <Ticket key={i} data={ticket}/>)}\r\n          {/*Вообще, индекс массива не стоит передовать как индентефикатор, но в данной работе на об компонентах билетов не происходит никаких событй, поэтому можно опустить этот момент */}\r\n          <button className='main__button' onClick={showTickets}>Показать еще 5 билетов!</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Main;\r\n\r\n\r\n","import Header from './Header';\r\nimport React from 'react';\r\nimport Sidebar from './Sidebar';\r\nimport Main from './Main';\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <Header />\r\n      <div className='content'>\r\n        <Sidebar />\r\n        <Main />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux';\n\n\nconst defaultState = {\n  isAllStopsChecked:true,\n  stopsArray:[]\n}\n\nconst reducer = (state = defaultState, action) => {\n  switch(action.type){\n    case \"TOGGLE_STOPS\":\n      return {...state, isAllStopsChecked: action.payload}\n    case \"CHANGE_ARRAY\":\n        return {...state, stopsArray: action.payload}\n    default:\n      return state\n  }\n}\n\nconst store = createStore(reducer)\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}